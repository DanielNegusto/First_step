# Проект по анализу данных из exel таблицы

## Описание проекта

Этот проект предназначен для анализа ваших расходов и пополнений банковских карт из exel файла

## Установка

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/your-repo/project-name.git
    ```

2. Перейдите в директорию проекта:
    ```bash
    cd project-name
    ```

3. Установите необходимые зависимости:
    ```bash
    # для первичной установки
     poetry install
    # для обновления
    poetry update
    ```
## Использование
Для начала выгрузите свой exel файл с транзакциями в деректорию data и назовите его 'operations.xls'

### Данные которые можно получить используя данную программу
В данном проекте пока что реализованны 3 категории:
- Веб-страницы
- Сервисы
- Отчеты
## Веб-страницы
### Главная
#### Выводит или сохраняет в файл по вашей дате следующие данные:
- Приветствие в формате 
"???"
, где 
???
 — «Доброе утро» / «Добрый день» / «Добрый вечер» / «Доброй ночи» в зависимости от текущего времени.
- По каждой карте:
последние 4 цифры карты;
общая сумма расходов;
кешбэк (1 рубль на каждые 100 рублей).
- Топ-5 транзакций по сумме платежа.
- Курс валют.
- Стоимость акций из S&P500.
### События
#### Выводит или сохраняет в файл по вашей дате и необезательному диапозону данных
#### По умолчанию диапазон равен одному месяцу (с начала месяца, на который выпадает дата, по саму дату).
Возможные значения второго необязательного параметра:

W — неделя, на которую приходится дата;

M — месяц, на который приходится дата;

Y — год, на который приходится дата;

ALL — все данные до указанной даты.
Возвращаемый JSON-ответ содержит следующие данные:

- «Расходы»:
Общая сумма расходов.
Раздел «Основные», в котором траты по категориям отсортированы по убыванию. Данные предоставляются по 7 категориям с наибольшими тратами, траты по остальным категориям суммируются и попадают в категорию «Остальное».
Раздел «Переводы и наличные», в котором сумма по категориям «Наличные» и «Переводы» отсортирована по убыванию.
- «Поступления»:
Общая сумма поступлений.
Раздел «Основные», в котором поступления по категориям отсортированы по убыванию.
- Курс валют.
- Стоимость акций из S&P 500.
## Сервисы
### Выгодные категории повышенного кешбэка.
Сервис позволяет проанализировать, какие категории были наиболее выгодными для выбора в качестве категорий повышенного кешбэка.

Напишите функцию для анализа выгодности категорий повышенного кешбэка.

На вход функции поступают данные для анализа, год и месяц.

Входные параметры:
- data — данные с транзакциями;
- year — год, за который проводится анализ;
- month — месяц, за который проводится анализ.
На выходе — JSON с анализом, сколько на каждой категории можно заработать кешбэка в указанном месяце года.
### Инвесткопилка
Позволяет копить через округление ваших трат.

Можно задать комфортный порог округления: 10, 50 или 100 ₽. 
Траты будут округляться, и разница между фактической суммой 
трат по карте и суммой округления будет попадать на счет «Инвесткопилки».
## Отчеты
В данном блоке реализованна одна функция это Траты по категории
Функция принимает на вход:

- датафрейм с транзакциями,
- название категории,
- опциональную дату.
Если дата не передана, то берется текущая дата.

Функция возвращает траты по заданной категории за последние три месяца (от переданной даты).
## API
Перед использованием программы нужно создать файл '.env'
API - перейти на сайт "https://apilayer.com" и найти там "FIXER API" и получить свой апи ключь и записать его в переменную файла .env
AlPHA_API - перейти на сайт "https://www.alphavantage.co" и получить свой апи и записать его в другую переменную .env

## Запуск программы
#### В данном проекте реализована функция которая помогает прочитать любой файл с транзакциями и отфильтровать его так, как вы хотите.
Основная логика проекта заложена в модуле "main.py" которая связывает функциональности между собой.
для того чтобы запустить программу либо запустите файл main.py из директории проекта, либо через консоль
```bash
poetry run python main.py
```
# Тестирование
Для тестирования используйте библиотеку pytest. В проекте включены тесты для всех основных функций.

# Запуск тестов
Убедитесь, что у вас установлен pytest

Запустите тесты из корневой директории проекта:
```bash
pytest
```
### Проект покрыт тестами с использованием pytest. Для запуска тестов выполните команду:

```bash
pytest --cov
```